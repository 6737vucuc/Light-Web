# ุฏููู ุงูุชุทุจูู: ูุธุงู ุงููุฌููุนุงุช ูุงูุฑุณุงุฆู ุงูููุฑูุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุนุงุฏุฉ ุชุตููู ูุงูู ูุธุงู ุงููุฌููุนุงุช ูุงูุฑุณุงุฆู ูู ุงููุดุฑูุน ููุตุจุญ ุนุตุฑููุง ููุนุงููุง ุจุงุณุชุฎุฏุงู **Supabase Realtime** ุจุฏูุงู ูู Pusher.

---

## ุงูููููุงุช ุงูุฌุฏูุฏุฉ

### 1. **GroupCard** (`components/community/GroupCard.tsx`)
ุจุทุงูุฉ ูุฌููุนุฉ ุญุฏูุซุฉ ูุชูุงุนููุฉ ูุน:
- ุชุฃุซูุฑุงุช ุญุฑููุฉ ุนูุฏ ุงูุชูุฑูุฑ (Hover effects)
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงููุฌููุนุฉ (ุงูุฃุนุถุงุก ูุงูุฑุณุงุฆู)
- ุฃููููุงุช ุฏููุงููููุฉ ููููุฉ
- ุชุฏุฑุฌุงุช ููููุฉ ุฌุฐุงุจุฉ

### 2. **MessageBubble** (`components/community/MessageBubble.tsx`)
ููุงุนุฉ ุฑุณุงูุฉ ูุญุณููุฉ ูุน:
- ุฏุนู ุงูุฑุฏูุฏ (Replies)
- ุนุฑุถ ุญุงูุฉ ุงููุฑุงุกุฉ (Read status)
- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช ุนูุฏ ุงูุชูุฑูุฑ (Reply, Delete)
- ุชูุณูู ุงุญุชุฑุงูู ููุฑุณุงุฆู

### 3. **TypingIndicator** (`components/community/TypingIndicator.tsx`)
ูุคุดุฑ ุงููุชุงุจุฉ ูุน:
- ุฑุณูู ูุชุญุฑูุฉ (Animations)
- ุนุฑุถ ุฃุณูุงุก ุงููุณุชุฎุฏููู ุงูุฐูู ููุชุจูู
- ุชุตููู ุนุตุฑู ูุน ุชุฃุซูุฑุงุช pulse

### 4. **OnlineStatus** (`components/community/OnlineStatus.tsx`)
ูุคุดุฑ ุญุงูุฉ ุงูุงุชุตุงู ูุน:
- ููุทุฉ ููููุฉ ุชุดูุฑ ุฅูู ุงูุญุงูุฉ
- ูุต ุชูุถูุญู (ูุชุตู/ุบูุฑ ูุชุตู)
- ุชุฃุซูุฑุงุช ูุจุถูุฉ

### 5. **ChatHeader** (`components/community/ChatHeader.tsx`)
ุฑุฃุณ ุงููุญุงุฏุซุฉ ูุน:
- ุตูุฑุฉ ุงููุณุชุฎุฏู
- ุญุงูุฉ ุงูุงุชุตุงู ูุงููุชุงุจุฉ
- ุชุตููู ุงุญุชุฑุงูู ููุธูู

### 6. **MessageInput** (`components/community/MessageInput.tsx`)
ุญูู ุฅุฏุฎุงู ุงูุฑุณุงุฆู ูุน:
- ุฏุนู ุงูุฑุฏูุฏ
- ููุชูู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ
- ุชุบููุฑ ุญุฌู ุงููุต ุชููุงุฆููุง
- ุฃุฒุฑุงุฑ ุงููููุงุช ูุงูุตูุฑ

---

## ุงูุฎุทุงูุงุช (Hooks) ุงูุฌุฏูุฏุฉ

### **usePrivateChat** (`lib/hooks/usePrivateChat.ts`)
ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู ุงูุฎุงุตุฉ ูุน Supabase Realtime:
```typescript
const { messages, setMessages, recipientTyping, sendTyping } = usePrivateChat(recipientId, currentUserId);
```

### **useRealtimeChat** (`lib/hooks/useRealtimeChat.ts`)
ุฅุฏุงุฑุฉ ุฑุณุงุฆู ุงููุฌููุนุงุช ูุน Supabase Realtime:
```typescript
const { messages, setMessages, typingUsers, sendTyping } = useRealtimeChat(channelId, currentUserId);
```

---

## ุฎุฏูุงุช ุงูุจุซ ุงูููุฑู

### **RealtimeChatService** (`lib/realtime/chat.ts`)
ุฎุฏูุฉ ูุฑูุฒูุฉ ูุฅุฏุงุฑุฉ ุงูุจุซ ุงูููุฑู:
- `sendMessage()` - ุฅุฑุณุงู ุฑุณุงูุฉ
- `sendGroupMessage()` - ุฅุฑุณุงู ุฑุณุงูุฉ ูุฌููุนุฉ
- `sendTypingIndicator()` - ุฅุฑุณุงู ูุคุดุฑ ุงููุชุงุจุฉ
- `getPrivateChannelName()` - ุงูุญุตูู ุนูู ุงุณู ุงูููุงุฉ ุงูุฎุงุตุฉ
- `getGroupChannelName()` - ุงูุญุตูู ุนูู ุงุณู ููุงุฉ ุงููุฌููุนุฉ

---

## ููุงุท ุงูููุงูุฉ (API Endpoints)

### **POST** `/api/groups/[id]/typing`
ุชุญุฏูุซ ุญุงูุฉ ุงููุชุงุจุฉ ูู ุงููุฌููุนุฉ:
```json
{
  "isTyping": true
}
```

### **POST** `/api/chat/messages/send`
ุฅุฑุณุงู ุฑุณุงูุฉ ุฎุงุตุฉ:
```json
{
  "recipientId": 123,
  "content": "Hello!",
  "messageType": "text"
}
```

---

## ุงูุตูุญุงุช ุงููุญุฏุซุฉ

### **ุตูุญุฉ ุงููุฌุชูุน** (`app/[locale]/community/page.tsx`)
- ุชุตููู ุฌุฏูุฏ ุนุตุฑู ูุน ุชุฏุฑุฌุงุช ููููุฉ
- ุงุณุชุฎุฏุงู ูููู `GroupCard` ุงูุฌุฏูุฏ
- ุนุฑุถ ุญุงูุฉ ุงููุชุงุจุฉ ูู ุฑุฃุณ ุงูุตูุญุฉ
- ุชุฃุซูุฑุงุช ุญุฑููุฉ ุณูุณุฉ

### **ุตูุญุฉ ุงูุฑุณุงุฆู** (`app/[locale]/messages/page.tsx`)
- ุฏุนู Supabase Realtime ุงููุงูู
- ุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู ูุงููุชุงุจุฉ
- ูุงุฌูุฉ ูุญุณููุฉ ูุนุตุฑูุฉ

---

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โจ **ุงูุฑุณุงุฆู ุงูููุฑูุฉ**
- ูุตูู ุงูุฑุณุงุฆู ูู ุฃุฌุฒุงุก ูู ุงูุซุงููุฉ
- ุนุฏู ูุฌูุฏ ุชุฃุฎูุฑ ููุญูุธ
- ุชุฒุงูู ูุงูู ุจูู ุฌููุน ุงููุณุชุฎุฏููู

### ๐ฏ **ูุคุดุฑุงุช ุงููุชุงุจุฉ**
- ุนุฑุถ ุงููุณุชุฎุฏููู ุงูุฐูู ููุชุจูู ุงูุขู
- ุฑุณูู ูุชุญุฑูุฉ ุฌุฐุงุจุฉ
- ุชุญุฏูุซ ููุฑู ููุญุงูุฉ

### ๐จ **ุชุตููู ุนุตุฑู**
- ุฃููุงู ูุชุฏุฑุฌุงุช ุฌุฐุงุจุฉ
- ุชุฃุซูุฑุงุช ุญุฑููุฉ ุงุญุชุฑุงููุฉ
- ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู

### ๐ฑ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณููุฉ**
- ุฏุนู ุงูุฃุฌูุฒุฉ ุงููุฎุชููุฉ (Responsive)
- ุณุฑุนุฉ ุชุญููู ุนุงููุฉ
- ุฃุฏุงุก ูุญุณูู

---

## ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุฌููุน ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ููููุฉ ุจุงููุนู ูู Vercel:
- `SUPABASE_URL` - ุฑุงุจุท Supabase
- `SUPABASE_ANON_KEY` - ููุชุงุญ Supabase ุงูุนุงู
- `SUPABASE_SERVICE_ROLE_KEY` - ููุชุงุญ ุงูุฎุฏูุฉ

---

## ุงูุงุฎุชุจุงุฑ

ููุงุฎุชุจุงุฑ ุงููุญูู:
```bash
npm run dev
```

ุซู ุชูุฌู ุฅูู: `http://localhost:3000/ar/community`

---

## ุงูููุงุญุธุงุช ุงููููุฉ

1. **Supabase Realtime** ูุชุทูุจ ุงุชุตุงู WebSocket ูุณุชูุฑ
2. **ูููุงุช ุงูุจุซ** ุชููุดุฃ ุชููุงุฆููุง ุนูุฏ ุงูุงุชุตุงู
3. **ุญุงูุฉ ุงููุชุงุจุฉ** ุชูุญุฏูุซ ูู 3 ุซูุงู
4. **ุงูุฑุณุงุฆู** ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชูุจุซ ููุฑูุง

---

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:
- [ุชูุซูู Supabase Realtime](https://supabase.com/docs/guides/realtime)
- [ุชูุซูู Next.js](https://nextjs.org/docs)
- [ุชูุซูู Tailwind CSS](https://tailwindcss.com/docs)
